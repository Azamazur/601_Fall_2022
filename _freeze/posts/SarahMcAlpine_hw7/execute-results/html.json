{
  "hash": "833474979235cc7259dbfb82d1cef917",
  "result": {
    "markdown": "---\ntitle: \"Sarah McAlpine - Challenge 7\"\nauthor: \"Sarah McAlpine\"\ndesription: \"Homework Challenge 7\"\ndate: \"11/2/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_7\n  - sarahmcalpine\n  - airbnb\n  - ggplot2\n  - summarytools\n  - treemap\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(summarytools)\nlibrary(treemap)\n\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n## Adding Dimensions to Airbnb Data Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#initial read-in \nairbnb_orig <- read_csv(\"_data/AB_NYC_2019.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 48895 Columns: 16\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr   (5): name, host_name, neighbourhood_group, neighbourhood, room_type\ndbl  (10): id, host_id, latitude, longitude, price, minimum_nights, number_o...\ndate  (1): last_review\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n#airbnb_clean$price <- replace(airbnb_clean$price, airbnb_clean$price == 0, NA)\n\nairbnb_medianpriced <- airbnb_orig %>%\n  filter(price>0) %>%\n  group_by(room_type, neighbourhood_group) %>%\n    summarize(median(price))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'room_type'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\n#airbnb_medianpriced\n\nairbnb_medianpriced %>%\ntreemap(room_type,\n        index= c(\"neighbourhood_group\", \"room_type\"),\n        vSize = \"median(price)\",\n        type = \"index\",\n        title = \"Median Listing Price by Neighborhood, Airbnb NYC 2019\"\n)\n```\n\n::: {.cell-output-display}\n![](SarahMcAlpine_hw7_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#try again, swapping room and neighborhood group\nairbnb_medianpriced %>%\ntreemap(room_type,\n        index= c(\"room_type\",\"neighbourhood_group\"),\n        vSize = \"median(price)\",\n        type = \"index\",\n        title = \"Median Listing Price by Neighborhood, Airbnb NYC 2019\"\n)\n```\n\n::: {.cell-output-display}\n![](SarahMcAlpine_hw7_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n\nThese treemaps doesn't tell a clear story. I think I'll try violin plots to see the range and density of prices, but I need to scale my data to those greater than zero and smaller than $1000.\n\n## Violin Plots\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_priced <- airbnb_orig %>%\n  filter(price>0, price<1000) %>%\n  group_by(room_type, neighbourhood_group) \n\nairbnb_priced %>%  \n  ggplot(aes(x=room_type, y=price, fill=neighbourhood_group)) + \n  geom_violin(width = 1, size = .5, \n              scale = \"area\",\n              trim = TRUE)+\n  coord_flip()+\n  xlab(\"room type\")\n```\n\n::: {.cell-output-display}\n![](SarahMcAlpine_hw7_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\nThis violin plot shows the density of prices of each rental, by both room type and by borough, but the scale is so various that it's hard to really compare. Perhaps 3 separate graphs would show this better, or even a lower max value. I could also try this again after removing outliers--I imagine that would be much clearer.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_pricedlow <- airbnb_orig %>%\n  filter(price>0, price<300) %>%\n  group_by(room_type, neighbourhood_group) \n\nairbnb_pricedlow %>%  \n  ggplot(aes(x=room_type, y=price, fill=neighbourhood_group)) + \n  geom_violin(width = 1, size = .5, \n              scale = \"area\")+\n  coord_flip()+\n  xlab(\"room type\")\n```\n\n::: {.cell-output-display}\n![](SarahMcAlpine_hw7_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n## Grouped Bars\n\n::: {.cell}\n\n```{.r .cell-code}\nairbnb_medianpriced <- airbnb_orig %>%\n  filter(price>0) %>%\n  group_by(room_type, neighbourhood_group) %>%\n    summarize(median(price))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'room_type'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nairbnb_medianpriced <- airbnb_medianpriced %>%\n  rename(median_price = \"median(price)\") \n\n#airbnb_medianpriced\n\nairbnb_medianpriced %>%\n  ggplot(aes(x = room_type, y = median_price, fill = neighbourhood_group)) +\n  geom_bar(position= \"dodge\", stat = \"identity\") +\n  xlab(\"room type\") +\n  ylab(\"median price per night\")+\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](SarahMcAlpine_hw7_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nairbnb_medianpriced %>%\n  ggplot(aes(x = reorder(neighbourhood_group, +median_price), y = median_price, fill = room_type)) +\n  geom_bar(position= \"dodge\", stat = \"identity\")+\n  xlab(\"borough\")+\n  ylab(\"median price per night\")+\n  ggtitle(\"Median NYC Airbnb Prices 2019, by Room Type and Borough\")\n```\n\n::: {.cell-output-display}\n![](SarahMcAlpine_hw7_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\nThese last two graphs show the clear distinctions among the median prices by room type, and while both show the differences across boroughs, the final graph tells the clearest story. I couldn't figure out how to reorder the boroughs for the horizontal bar plot--that may make it easier to see the 5 boroughs in relation to one another. Can anyone help with that?\n",
    "supporting": [
      "SarahMcAlpine_hw7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}